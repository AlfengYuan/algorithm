# -- coding: utf-8 --
# @Time: 2023/12/27
# @Author: yyf
# @File: flask_example_request.py

import base64
import pprint

import requests

# DETECTION_URL = 'http://localhost:5000/v1/object-detection/yolov5s'
# DETECTION_URL = 'http://localhost:6008/face-encode/cjjb'
DETECTION_URL = 'http://localhost:6008/face-compare/cjjb'
# IMAGE = 'zidane.jpg'
# IMAGE = '20200908221516829.png'
IMAGE = 'webwxgetmsgimg.png'
# IMAGE = "/home/yyf/Documents/PycharmProjects/yolov5/utils/flask_rest_api/vlcsnap-2023-11-14-14h18m20s882.png"
# IMAGE = "26ed6088dd203bbd7023a64fb263d251.png"
# Read image
with open(IMAGE, 'rb') as f:
    image_data = base64.b64encode(f.read()).decode("utf-8")

features = [
            {'searchValue': None,
             'createBy': None,
             'createTime': None,
             'updateBy': None,
             'updateTime': None,
             'remark': None,
             'params': {},
             'id': 8,
             'name': '测试444',
             'certificate': None,
             'phone': None,
             'image': '3176',
             'addTime': None,
             'feature': '-0.0300598181784153,0.09199142456054688,0.10796040296554565,0.02912943623960018,-0.10483057796955109,-0.05766529589891434,-0.046646445989608765,-0.06981158256530762,0.08022239804267883,-0.047655150294303894,0.1772117167711258,-0.05802997201681137,-0.2099495381116867,-0.042622972279787064,-0.046414315700531006,0.12888160347938538,-0.13309970498085022,-0.060520485043525696,-0.11363396793603897,-0.10167409479618073,0.015197502449154854,0.08261620253324509,0.005883492063730955,-0.0206243135035038,-0.08280757069587708,-0.2724010944366455,-0.0865093320608139,-0.08292877674102783,0.07749610394239426,-0.09711164981126785,-0.031171761453151703,0.03608832508325577,-0.2124982625246048,-0.035416338592767715,-0.005414180923253298,0.06155002862215042,0.00949142687022686,-0.06265338510274887,0.1289048194885254,0.019941825419664383,-0.15705710649490356,0.063682921230793,0.05455318093299866,0.22858695685863495,0.22046984732151031,0.006497262045741081,-0.026027321815490723,-0.07948260754346848,0.04533360153436661,-0.21032968163490295,-0.005132954567670822,0.14040927588939667,0.09007802605628967,0.08580552786588669,0.042223744094371796,-0.1321515291929245,-0.00016266945749521255,0.11942904442548752,-0.1599634885787964,0.05804292857646942,0.04858061671257019,-0.08648931980133057,-0.03169603645801544,-0.06957095861434937,0.19027851521968842,0.036457642912864685,-0.07734940201044083,-0.13711364567279816,0.13575978577136993,-0.19238153100013733,-0.029962891712784767,0.1055721566081047,-0.07518858462572098,-0.12940523028373718,-0.2970321774482727,0.10377667844295502,0.4100993275642395,0.16741348803043365,-0.17298446595668793,0.026384364813566208,-0.10970643907785416,-0.03872765600681305,0.015708621591329575,0.028632130473852158,-0.08161766827106476,0.004100996069610119,-0.10577202588319778,0.060466308146715164,0.19070082902908325,-0.05470741540193558,0.04291222244501114,0.2334701269865036,-0.015089886263012886,0.010684502311050892,-0.022789383307099342,-0.00868900865316391,-0.09799937158823013,-0.02513115108013153,-0.090976782143116,-0.06683690845966339,0.08788828551769257,-0.17027437686920166,0.035782624036073685,0.1357731968164444,-0.2004224807024002,0.08534292131662369,-0.024937860667705536,-0.07152451574802399,0.04487886279821396,0.03247477859258652,-0.05761754512786865,-0.032182950526475906,0.22053903341293335,-0.2347540408372879,0.2051190435886383,0.19934065639972687,0.01982976123690605,0.09930300712585449,0.058553263545036316,0.14717811346054077,-0.07663007080554962,-0.041959285736083984,-0.10322489589452744,-0.06481029838323593,0.015819646418094635,-0.03125828504562378,0.02379462867975235,0.04035882651805878'},
            {'searchValue': None,
             'createBy': None,
             'createTime': None,
             'updateBy': None,
             'updateTime': None,
             'remark': None,
             'params': {},
             'id': 12,
             'name': '测试444',
             'certificate': None,
             'phone': None,
             'image': '3176',
             'addTime': None,
             'feature':'-0.05744010955095291,0.10431385040283203,0.09453356266021729,0.020902635529637337,-0.11904699355363846,-0.05314817279577255,-0.04288492351770401,0.011676096357405186,0.08541025966405869,-0.016772929579019547,0.2043163776397705,0.00666408147662878,-0.19744935631752014,-0.027467507869005203,-0.05657580494880676,0.12335637956857681,-0.11451588571071625,-0.040509775280952454,-0.12890785932540894,-0.14152804017066956,0.0010845311917364597,0.037035614252090454,-0.0012272307649254799,0.008468477055430412,-0.10004625469446182,-0.21223938465118408,-0.0933295339345932,-0.0813637524843216,0.1010165587067604,-0.1377437710762024,-0.01902797445654869,-0.008987989276647568,-0.2178523689508438,-0.03769712150096893,-0.0030382974073290825,-0.0005450043827295303,-0.015624986961483955,-0.06709738075733185,0.16568629443645477,0.007938360795378685,-0.10798750072717667,0.07382867485284805,0.0735761746764183,0.22786957025527954,0.23776182532310486,-0.014355236664414406,-0.03221282362937927,-0.06803826987743378,0.07631773501634598,-0.22970493137836456,0.02637319639325142,0.16244202852249146,0.10074598342180252,0.13521607220172882,0.03120783157646656,-0.1199667677283287,0.008838225156068802,0.12878553569316864,-0.1321823000907898,0.06063871830701828,0.013598935678601265,-0.08961313962936401,-0.10411357879638672,-0.10574321448802948,0.14978346228599548,0.08176030218601227,-0.08777223527431488,-0.17326781153678894,0.13767239451408386,-0.18438589572906494,-0.021901343017816544,0.114665187895298,-0.08502186834812164,-0.10999754071235657,-0.28699782490730286,0.13114970922470093,0.3834782540798187,0.20781289041042328,-0.1767754703760147,0.028044354170560837,-0.11649686098098755,-0.02159038931131363,-0.03437633812427521,0.0034182558301836252,-0.11589190363883972,-0.04437039792537689,-0.0676782950758934,0.08854717016220093,0.15439660847187042,-0.04121812433004379,0.023853521794080734,0.17689484357833862,0.014164806343615055,0.036272257566452026,-0.017733285203576088,0.012549947015941143,-0.10120797902345657,-0.0658339411020279,-0.08544600754976273,-0.03008706122636795,0.06507217884063721,-0.16358888149261475,0.02671240270137787,0.10243778675794601,-0.18103015422821045,0.11775791645050049,0.002550379140302539,-0.0689210444688797,0.009771646000444889,0.07118270546197891,-0.06352820247411728,0.0053262850269675255,0.18756885826587677,-0.2206406146287918,0.28281062841415405,0.1786227822303772,0.012857689522206783,0.09061654657125473,0.07666181772947311,0.1499778777360916,-0.09224222600460052,-0.03326476365327835,-0.04871032014489174,-0.0812883973121643,-0.005985938012599945,-0.04882199689745903,0.03933316841721535,0.021325260400772095;  '
             },
            {'searchValue': None,
             'createBy': None,
             'createTime': None,
             'updateBy': None,
             'updateTime': None,
             'remark': None,
             'params': {},
             'id': 13,
             'name': '测试444',
             'certificate': None,
             'phone': None,
             'image': '3176',
             'addTime': None,
             'feature':'-0.05744010955095291,0.10431385040283203,0.09453356266021729,0.020902635529637337,-0.11904699355363846,-0.05314817279577255,-0.04288492351770401,0.011676096357405186,0.08541025966405869,-0.016772929579019547,0.2043163776397705,0.00666408147662878,-0.19744935631752014,-0.027467507869005203,-0.05657580494880676,0.12335637956857681,-0.11451588571071625,-0.040509775280952454,-0.12890785932540894,-0.14152804017066956,0.0010845311917364597,0.037035614252090454,-0.0012272307649254799,0.008468477055430412,-0.10004625469446182,-0.21223938465118408,-0.0933295339345932,-0.0813637524843216,0.1010165587067604,-0.1377437710762024,-0.01902797445654869,-0.008987989276647568,-0.2178523689508438,-0.03769712150096893,-0.0030382974073290825,-0.0005450043827295303,-0.015624986961483955,-0.06709738075733185,0.16568629443645477,0.007938360795378685,-0.10798750072717667,0.07382867485284805,0.0735761746764183,0.22786957025527954,0.23776182532310486,-0.014355236664414406,-0.03221282362937927,-0.06803826987743378,0.07631773501634598,-0.22970493137836456,0.02637319639325142,0.16244202852249146,0.10074598342180252,0.13521607220172882,0.03120783157646656,-0.1199667677283287,0.008838225156068802,0.12878553569316864,-0.1321823000907898,0.06063871830701828,0.013598935678601265,-0.08961313962936401,-0.10411357879638672,-0.10574321448802948,0.14978346228599548,0.08176030218601227,-0.08777223527431488,-0.17326781153678894,0.13767239451408386,-0.18438589572906494,-0.021901343017816544,0.114665187895298,-0.08502186834812164,-0.10999754071235657,-0.28699782490730286,0.13114970922470093,0.3834782540798187,0.20781289041042328,-0.1767754703760147,0.028044354170560837,-0.11649686098098755,-0.02159038931131363,-0.03437633812427521,0.0034182558301836252,-0.11589190363883972,-0.04437039792537689,-0.0676782950758934,0.08854717016220093,0.15439660847187042,-0.04121812433004379,0.023853521794080734,0.17689484357833862,0.014164806343615055,0.036272257566452026,-0.017733285203576088,0.012549947015941143,-0.10120797902345657,-0.0658339411020279,-0.08544600754976273,-0.03008706122636795,0.06507217884063721,-0.16358888149261475,0.02671240270137787,0.10243778675794601,-0.18103015422821045,0.11775791645050049,0.002550379140302539,-0.0689210444688797,0.009771646000444889,0.07118270546197891,-0.06352820247411728,0.0053262850269675255,0.18756885826587677,-0.2206406146287918,0.28281062841415405,0.1786227822303772,0.012857689522206783,0.09061654657125473,0.07666181772947311,0.1499778777360916,-0.09224222600460052,-0.03326476365327835,-0.04871032014489174,-0.0812883973121643,-0.005985938012599945,-0.04882199689745903,0.03933316841721535,0.021325260400772095;;  ;-0.055237412452697754,0.1083727702498436,0.09794136881828308,0.004022177308797836,-0.066151924431324,-0.06721875816583633,-0.05607549101114273,-0.03331510350108147,0.09378635138273239,-0.006453291513025761,0.19008886814117432,-0.07771062105894089,-0.24928823113441467,0.006339543964713812,-0.02709299325942993,0.12546998262405396,-0.15828394889831543,-0.031431034207344055,-0.11105906218290329,-0.09091946482658386,0.05857322737574577,0.06459575146436691,0.02839469723403454,0.013342300429940224,-0.04583267122507095,-0.3029457628726959,-0.0610821433365345,-0.07882673293352127,0.08853788673877716,-0.11311524361371994,0.010931272059679031,0.0659799799323082,-0.1306799054145813,-0.019182130694389343,0.005372968968003988,0.04540073871612549,-0.012292570434510708,-0.10136681795120239,0.21508558094501495,-0.0056256456300616264,-0.15113763511180878,-0.04380146414041519,0.0329442135989666,0.24613843858242035,0.1931501179933548,0.020416339859366417,0.0198696106672287,-0.06160286068916321,0.05853811651468277,-0.27291950583457947,0.03451664000749588,0.18385736644268036,0.04417147859930992,0.09932073205709457,0.07063493132591248,-0.1609710454940796,0.004486279562115669,0.10227777063846588,-0.12877164781093597,0.05419006943702698,0.06723552197217941,-0.11036510765552521,-0.027808090671896935,-0.12479918450117111,0.19323314726352692,0.0743047297000885,-0.09460597485303879,-0.10826746374368668,0.11143773049116135,-0.14669254422187805,-0.06362656503915787,0.06718174368143082,-0.12409087270498276,-0.12493912130594254,-0.296075701713562,0.04504851624369621,0.3828582763671875,0.12263648957014084,-0.14412564039230347,0.029207447543740273,-0.07375260442495346,-0.046635258942842484,0.05309256538748741,0.07571785897016525,-0.0772298276424408,-0.03463796526193619,-0.05965809151530266,0.06842627376317978,0.17007146775722504,-0.07353390008211136,-0.008214379660785198,0.1676640808582306,-0.0384969562292099,0.03397898003458977,-0.026564452797174454,0.01135505735874176,-0.04822778329253197,-0.002344113541767001,-0.06181344389915466,0.026833146810531616,0.0866890624165535,-0.1443960964679718,0.018408404663205147,0.1052977591753006,-0.19019006192684174,0.08003856241703033,0.007042646408081055,-0.032987531274557114,0.060444366186857224,0.010641924105584621,-0.093105249106884,-0.016842355951666832,0.2272527515888214,-0.22360001504421234,0.22671614587306976,0.20917296409606934,0.008059420622885227,0.11261818557977676,0.03246492147445679,0.16453953087329865,-0.030252931639552116,-0.019142579287290573,-0.130829319357872,-0.04833083599805832,0.022351497784256935,0.033034443855285645,-0.032464902848005295,0.03234060853719711'
             },
            {'searchValue': None,
             'createBy': None,
             'createTime': None,
             'updateBy': None,
             'updateTime': None,
             'remark': None,
             'params': {},
             'id': 14,
             'name': '测试444',
             'certificate': None,
             'phone': None,
             'image': '3176',
             'addTime': None,
             'feature':''
             },
            {'searchValue': None,
             'createBy': None,
             'createTime': None,
             'updateBy': None,
             'updateTime': None,
             'remark': None,
             'params': {},
             'id': 15,
             'name': '测试444',
             'certificate': None,
             'phone': None,
             'image': '3176',
             'addTime': None,
             'feature': ' '
             },
            ]
response = requests.post(DETECTION_URL, json={'image': image_data, 'features': features})
# response = requests.post(DETECTION_URL, json={'image': image_data})
pprint.pprint(response.text)
